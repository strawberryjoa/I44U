<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I44U</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
        }
        .container a{
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .profile-info {
            margin-top: 20px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .profile-info p {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        .link {
            display: inline-block;
            margin: 10px;
            padding: 8px 16px;
            background-color: #4a90e2;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
        }
        .link:hover {
            background-color: #1e78c6;
        }
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        header {
            background-color: #0d68a3; /* 하늘색 계열 */
        }
        header .text-white {
            color: #fff; /* 흰색 */
        }
        .bg-gray-200 {
            background-color: #f7fafc; /* 연한 회색 계열 */
        }
        .card {
            background-color: #fff; /* 흰색 */
        }
        .card:hover {
            background-color: #f7fafc; /* 연한 회색 계열 */
        }
        .bg-blue-200 {
            background-color: #4a90e2; /* 하늘색 계열 */
        }
        .bg-blue-200:hover {
            background-color: #1e78c6; /* 진한 하늘색 계열 */
        }
        .text-blue-500 {
            color: #4a90e2; /* 하늘색 계열 */
        }
        .text-blue-500:hover {
            color: #1e78c6; /* 진한 하늘색 계열 */
        }
        .bg-green-500 {
            background-color: #38a169; /* 초록색 계열 */
        }
        .bg-green-500:hover {
            background-color: #2f855a; /* 진한 초록색 계열 */
        }
        .text-green-500 {
            color: #38a169; /* 초록색 계열 */
        }
        .text-green-500:hover {
            color: #2f855a; /* 진한 초록색 계열 */
        }
        .font-bold {
            font-weight: 700; /* 굵은 글꼴 */
        }
        header:hover {
            background-color: #0d68a3; /* 마우스를 가져갔을 때의 배경색 */
        }
        /* 추가된 부분 */
        section.grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        section.grid div {
            background-color: #fff; /* 흰색 */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        section.grid div:hover {
            background-color: #f7fafc; /* 연한 회색 계열 */
        }
        section.grid h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #000000; /* 하늘색 계열 */
        }
        section.grid a {
            color: #4a90e2; /* 하늘색 계열 */
            text-decoration: none;
            transition: color 0.3s;
        }
        section.grid a:hover {
            color: #000000; /* 진한 하늘색 계열 */
        }
        body {
            background: linear-gradient(135deg, #8BC6EC 0%, #9599E2 100%);
        }
    </style>
</head>
<body class="bg-gray-200">
    <header class="bg-blue-200 py-4">
        <div class="container mx-auto flex justify-between items-center px-6">
            <div class="flex items-center">
                <h1 class="text-white text-xl font-bold mr-4 relative">
                    <a href="/dashboard" class="text-4xl md:text-5xl">
                      <span class="text-shadow">I44U</span>
                    </a>
                  </h1>
                  
                <span class="mr-8 text-white">information for you</span>
            </div>

            <!-- 검색 창 -->
            <div class="flex items-center space-x-8">
                <form action="/search_results" method="GET" class="flex items-center ml-auto">
                    <label for="activity_type" class="mr-2 text-white">검색 필터:</label>
                    <select id="activity_type" name="activity_type" class="mr-4">
                        <option value="">-- All Activities --</option>
                        <option value="Contest">공모전</option>
                        <option value="Activity">대외활동</option>
                        <option value="Job">취업/인턴</option>
                        <option value="Campus">교내활동</option>
                    </select>
                    <input type="text" id="activity_name" name="activity_name" placeholder="검색" class="p-2 border border-blue-300 rounded">
                </form>
                <a href="/profile" class="mt-2 font-bold hover:text-blue-700" style="color: white;">나의 페이지</a>
                <a href="/favorites" class="mt-2 font-bold hover:text-blue-700" style="color: white;">즐겨찾기</a>
                <a href="/portfolio" class="mt-2 font-bold hover:text-blue-700" style="color: white;">나의 포트폴리오</a>
                <a href="/logout" class="mt-2 font-bold hover:text-blue-700" style="color: white;">로그아웃</a>
                
            </div>
        </div>
    </header>

    <h1 class="text-4xl font-bold text-center my-8 text-white" style="font-size: 32px;">프로필 수정</h1>

    <form method="post" class="mx-auto max-w-md">
        <!-- 사용자 정보 입력 필드들 -->
        <div class="mb-4">
            <label for="username" class="block" style="font-weight: bold;">아이디:</label>
            <input type="text" id="username" name="username" value="{{ user.username }}" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="password" class="block" style="font-weight: bold;">비밀번호:</label>
            <input type="password" id="password" name="password" value="{{ user.password }}" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="confirm_password" class="block" style="font-weight: bold;">비밀번호 확인:</label>
            <input type="password" id="confirm_password" name="confirm_password" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="name" class="block" style="font-weight: bold;">이름:</label>
            <input type="text" id="name" name="name" value="{{ user.name }}" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="birthdate" class="block" style="font-weight: bold;">생년월일:</label>
            <input type="text" id="birthdate" name="birthdate" value="{{ user.birthdate }}" placeholder="YYYY-MM-DD" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="email" class="block" style="font-weight: bold;">이메일 주소:</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" required class="w-full border rounded-md py-2 px-3">
        
        <div class="mb-4">
            <label for="birthdate" class="block" style="font-weight: bold;">생년월일:</label>
            <input type="date" id="birthdate" name="birthdate" value="{{ user.birthdate }}" placeholder="YYYY-MM-DD" required class="w-full border rounded-md py-2 px-3">
        </div>

        <div class="mb-4">
            <label for="gender" class="block" style="font-weight: bold;">성별:</label>
            <select id="gender" name="gender" required class="w-full border rounded-md py-2 px-3">
                <option value="남" {% if user.gender == "남" %}selected{% endif %}>남</option>
                <option value="여" {% if user.gender == "여" %}selected{% endif %}>여</option>
            </select>
        </div>
        
        <div class="mb-4">
            <label for="school" class="block"style="font-weight: bold;">출신 학교:</label>
            <input type="text" id="school" name="school" value="{{ user.school }}" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <div class="mb-4">
            <label for="grade" class="block" style="font-weight: bold;">학년:</label>
            <select id="grade" name="grade" required class="w-full border rounded-md py-2 px-3">
                <option value="1학년" {% if user.grade == "1학년" %}selected{% endif %}>1학년</option>
                <option value="2학년" {% if user.grade == "2학년" %}selected{% endif %}>2학년</option>
                <option value="3학년" {% if user.grade == "3학년" %}selected{% endif %}>3학년</option>
                <option value="4학년" {% if user.grade == "4학년" %}selected{% endif %}>4학년</option>
            </select>
        </div>
        
        <div class="mb-4">
            <label for="department" class="block" style="font-weight: bold;">학과:</label>
            <input type="text" id="department" name="department" value="{{ user.department }}" required class="w-full border rounded-md py-2 px-3">
        </div>
        
        <!-- 변경 사항 -->
        <div class="mb-4">
            <label style="font-weight: bold;">'공모전 / 대외활동' 관심 분야:</label><br>
            <input type="checkbox" name="activity_interests" value="서포터즈·기자단·마케터" {% if '서포터즈·기자단·마케터' in user.activity_interests %}checked{% endif %}> 서포터즈·기자단·마케터<br>
            <input type="checkbox" name="activity_interests" value="체험단·모니터링·인턴십" {% if '체험단·모니터링·인턴십' in user.activity_interests %}checked{% endif %}> 체험단·모니터링·인턴십<br>
            <input type="checkbox" name="activity_interests" value="문학·학술·공학" {% if '문학·학술·공학' in user.activity_interests %}checked{% endif %}> 문학·학술·공학<br>
            <input type="checkbox" name="activity_interests" value="사진·영상" {% if '사진·영상' in user.activity_interests %}checked{% endif %}> 사진·영상<br>
            <input type="checkbox" name="activity_interests" value="아이디어·창업·네이밍" {% if '아이디어·창업·네이밍' in user.activity_interests %}checked{% endif %}> 아이디어·창업·네이밍<br>
            <input type="checkbox" name="activity_interests" value="기타(예체능, e스포츠 등)" {% if '기타(예체능, e스포츠 등)' in user.activity_interests %}checked{% endif %}> 기타(예체능, e스포츠 등)<br>
            <input type="checkbox" name="activity_interests" value="봉사활동" {% if '봉사활동' in user.activity_interests %}checked{% endif %}> 봉사활동<br>
            <input type="checkbox" name="activity_interests" value="기타(캠프/강연 등)" {% if '기타(캠프/강연 등)' in user.activity_interests %}checked{% endif %}> 기타(캠프/강연 등)<br>
            <input type="checkbox" name="activity_interests" value="디자인·그림·웹툰" {% if '디자인·그림·웹툰' in user.activity_interests %}checked{% endif %}> 디자인·그림·웹툰<br>
            <input type="checkbox" name="activity_interests" value="기맘 서포터즈" {% if '기맘 서포터즈' in user.activity_interests %}checked{% endif %}> 맘 서포터즈<br>
        </div>
        <!-- 변경 사항 -->
        <div class="mb-4">
            <label style="font-weight: bold;">'취업 / 인턴' 관심 분야:</label><br>
            <input type="checkbox" name="job_interests" value="IT개발·데이터" {% if 'IT개발·데이터' in user.job_interests %}checked{% endif %}> IT개발·데이터<br>
            <input type="checkbox" name="job_interests" value="미디어·문화·스포츠" {% if '미디어·문화·스포츠' in user.job_interests %}checked{% endif %}> 미디어·문화·스포츠<br>
            <input type="checkbox" name="job_interests" value="고객상담" {% if '고객상담' in user.job_interests %}checked{% endif %}> 고객상담<br>
            <input type="checkbox" name="job_interests" value="공공·복지" {% if '공공·복지' in user.job_interests %}checked{% endif %}> 공공·복지<br>
            <input type="checkbox" name="job_interests" value="교육" {% if '교육' in user.job_interests %}checked{% endif %}> 교육<br>
            <input type="checkbox" name="job_interests" value="구매·자재·물류" {% if '구매·자재·물류' in user.job_interests %}checked{% endif %}> 구매·자재·물류<br>
            <input type="checkbox" name="job_interests" value="금융·보험" {% if '금융·보험' in user.job_interests %}checked{% endif %}> 금융·보험<br>
            <input type="checkbox" name="job_interests" value="기획·전략" {% if '기획·전략' in user.job_interests %}checked{% endif %}> 기획·전략<br>
            <input type="checkbox" name="job_interests" value="디자인" {% if '디자인' in user.job_interests %}checked{% endif %}> 디자인<br>
            <input type="checkbox" name="job_interests" value="마케팅·홍보·조사" {% if '마케팅·홍보·조사' in user.job_interests %}checked{% endif %}> 마케팅·홍보·조사<br>
            <input type="checkbox" name="job_interests" value="상품기획·MD" {% if '상품기획·MD' in user.job_interests %}checked{% endif %}> 상품기획·MD<br>
            <input type="checkbox" name="job_interests" value="회계·세무·재무" {% if '회계·세무·재무' in user.job_interests %}checked{% endif %}> 회계·세무·재무<br>
            <input type="checkbox" name="job_interests" value="생산" {% if '생산' in user.job_interests %}checked{% endif %}> 생산<br>
            <input type="checkbox" name="job_interests" value="서비스" {% if '서비스' in user.job_interests %}checked{% endif %}> 서비스<br>
            <input type="checkbox" name="job_interests" value="연구·R&D" {% if '연구·R&D' in user.job_interests %}checked{% endif %}> 연구·R&D<br>
            <input type="checkbox" name="job_interests" value="영업·판매·무역" {% if '영업·판매·무역' in user.job_interests %}checked{% endif %}> 영업·판매·무역<br>
            <input type="checkbox" name="job_interests" value="운전·운송·배송" {% if '운전·운송·배송' in user.job_interests %}checked{% endif %}> 운전·운송·배송<br>
            <input type="checkbox" name="job_interests" value="의료" {% if '의료' in user.job_interests %}checked{% endif %}> 의료<br>
            <input type="checkbox" name="job_interests" value="인사·노무·HRD" {% if '인사·노무·HRD' in user.job_interests %}checked{% endif %}> 인사·노무·HRD<br>
            <input type="checkbox" name="job_interests" value="총무·법무·사무" {% if '총무·법무·사무' in user.job_interests %}checked{% endif %}> 총무·법무·사무<br>
            <input type="checkbox" name="job_interests" value="건설·건축" {% if '건설·건축' in user.job_interests %}checked{% endif %}> 건설·건축<br>
        </div>
        
        <div class="mb-4">
            <label for="past_activities" class="block" style="font-weight: bold;">참여 이력 / 경력:</label>
            <textarea id="past_activities" name="past_activities" rows="4" cols="50" class="w-full border rounded-md py-2 px-3">{{ user.past_activities }}</textarea>
        </div>
        
        <!-- 변경사항 저장 버튼 -->
        <div class="mt-6">
            <input type="submit" name="save_changes" value="저장하기" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
        </div>
    </form>
    
    <!-- 계정 삭제 폼 -->
    <form id="deleteForm" method="post" action="/delete_account" class="mx-auto max-w-md mt-8">
        <h2 class="text-xl font-bold mb-4">계정 삭제</h2>
        <p class="text-red-500">정말로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.</p>
        <input type="hidden" id="delete_confirm" name="delete_confirm" value="true">
        <div class="mt-4">
            <input type="submit" name="delete_account" value="삭제하기" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">
        </div>
    </form>
    
    <!-- 삭제 결과를 보여줄 영역 -->
    <div id="deleteResult" class="mx-auto max-w-md mt-8"></div>
    
    <script>
        // 폼 제출 전 확인 메시지 표시
        document.getElementById("deleteForm").addEventListener("submit", function(event) {
            var confirmed = confirm('정말로 계정을 삭제하시겠습니까?');
            if (!confirmed) {
                event.preventDefault(); // 폼 제출 취소
            }
        });

        // 계정 삭제 요청 처리
        document.getElementById("deleteForm").addEventListener("submit", function(event) {
            event.preventDefault(); // 기본 동작 중단

            var form = event.target;
            var formData = new FormData(form);

            fetch("/delete_account", {
                method: "POST",
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error("계정 삭제 요청에 실패했습니다.");
                }
            })
            .then(data => {
                document.getElementById("deleteResult").textContent = data;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>

    
</body>
</html>